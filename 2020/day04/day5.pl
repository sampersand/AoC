# AOC 2020, Day 4, in perl.
# We had to help customs agents validate passports.

open STDIN,'day4.txt'; # omit if reading from stdin

$/='';for(<>){s/cid:\S+//;7==splitonext;00;$"=
'|'            ;$o                         ++;
;$t   ++if&w   =~/ byr: (@{[1920..2002]})  (?#
#@#  %      %  ##) ecl: (amb|blu|brn|gr[yn ]#(
|hz  l |  | o  th) eyr: 20(2\d|30)         (?#
@#@  |      |  $#) hcl: \#[0-9a-fA-F]{6}   #!2
(?#  : x__x :  #?) hgt: ((@{[150..193]})c  (?#
)m|  (  @@  )  in) iyr: 20(1\d|20)         (?#
(?#   9.__.7   #?) pid: \d{9}              /x}
sub     w(     _){                         @@=
59..78;join"",sort split}print"P1:$o\nP2:$t\n"
