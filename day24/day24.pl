open STDIN, 'day24.txt';

                         while(<>
                       ){s/(?<![sn]
                      )[          ew
                     ]/            $&
         $&/xg;$%=$ @=              0; s/\s//g;/
       [ew]/x?$%:$@+=(              $_)cmp'o'for&S
			(q            !!              );            $%
     {$              %,            $@              ,}
    ^=                1}          $%                {$
    _}                ||delete$%{$_}                for 
    ##                ##############                ##
    K(                \%%);$P=0+K(\%                %)
    ;for(0..99){%@=%?=();for(
    ##                ##############                ##
K(\%%)){($%,$@)=S($;);$_++for@@{2+$%--.$;.$@,--$%.$;.$@--,
++$%.$;.$@++,$%++.$;.++$@,++$%.$;.$@--,$%++.$;.--$@}}($%=$@{
$_})==2||$%==1&&$%{$_}and$?{$_}=1 for&K(\%@);%%=%?}print"Part 1: $P\nPart 2: ",
0+K(\%%),"\n";
sub S{split@_}sub K{keys$_[0]}
=begin
while(<>){$%=$@=0;s/(?<![sn])[ew]/$&$&/g;/[ew]/?$%:$@+=$_
cmp'o'for split"";$%{$%,$@}^=1}$%{$_}||delete$%{$_}for
                         ########
                       ############
                      ##          ##
                     ##            ##
         ########## ##              ## #########
       ###############              ##############
      ##            ##              ##            ##
     ##              ##            ##              ## 
    ##                ##          ##                ##
    ##                ##############                ##
    ##                ##############                ##
     ##              ##            ##              ##
      ##            ##              ##            ##
       ##############                ##############
         ############                ############
       ##############                ##############
      ##            ##              ##            ##
     ##              ##            ##              ## 
    ##                ##############                ##
    ##                ##############                ##
    ##                ##          ##                ##
     ##              ##            ##              ##
      ##            ##              ##            ##
        ##############              ###############
         ########## ##              ## #########
                     ##            ## 
                      ##          ##
                       ############
