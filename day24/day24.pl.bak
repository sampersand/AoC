open STDIN, 'day24.txt';

while(<>){$%=$@=0;s/(?<![sn])[ew]/$&$&/g;/[ew]/?$%:$@+=$_
cmp'o'for split"";$%{$%,$@}^=1}$%{$_}||delete$%{$_}for
keys%%;print"Part 1: ",0+keys%%;for(0..99){%@=%?=();for(
keys%%){($%,$@)=split$;;$_++for@@{2+$%--.$;.$@,--$%.$;.$@--,
++$%.$;.$@++,$%++.$;.++$@,++$%.$;.$@--,$%++.$;.--$@}}($%=$@{
$_})==2||$%==1&&$%{$_}and$?{$_}=1 for keys%@;%%=%?}print"\nPart 2: ",
0+keys%%,"\n";
=begin
                         ########
                       ############
                      ##          ##
                     ##            ##
         ########## ##              ## #########
       ###############              ##############
      ##            ##              ##            ##
     ##              ##            ##              ## 
    ##                ##          ##                ##
    ##                ##############                ##
    ##                ##############                ##
     ##              ##            ##              ##
      ##            ##              ##            ##
       ##############                ##############
         ############                ############
       ##############                ##############
      ##            ##              ##            ##
     ##              ##            ##              ## 
    ##                ##############                ##
    ##                ##############                ##
    ##                ##          ##                ##
     ##              ##            ##              ##
      ##            ##              ##            ##
        ##############              ###############
         ########## ##              ## #########
                     ##            ## 
                      ##          ##
                       ############
