# Day 3: We had to organize turn on batteries based on inputs

$* << 'input.txt' if $*.empty?

  (o=0;def M(c=1,r=12)=r!=0?(;m=c[
..-                              r].
max   )+M(   c[I[   c,m]   +1..  ],r-
1):   "";t   =$<.   sum{   'S';  o+=M(
q=C   .(_1   [..-   02])   ,2).  to_i;
M(q   ).b.   to_i   };p(   o,t)  ;'&'
)if                              (I,
  C=->{_1.index _2},->{it.chars});

__END__
  ################################
###                              ##
###   ####   ####   ####   ####  ###
###   ####   ####   ####   ####  #####
###   ####   ####   ####   ####  #####
###   ####   ####   ####   ####  ###
###                              ##
  ################################
