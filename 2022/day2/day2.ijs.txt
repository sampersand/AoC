NB. $stdin = open 'day2.txt'

NB. MATRIX = [[4+3i, 1+1i, 7+2i],
NB.           [8+4i, 5+5i, 2+6i],
NB.           [3+8i, 9+9i, 6+7i]]

NB. p $stdin.sum { |line|
NB.   a, _, x = line.bytes
NB.   MATRIX[x & 3][(a & 3) - 1]
NB. }

findme=: {{ ({.~ <./@i:&'/\')(4!:4<'findme'){::4!:3'' }}
raw =: freads (findme '') , '/day2.txt'

M =: 3 3 $  4j3 8j4 3j8 1j1 5j5 9j9 7j2 2j6 6j7
lines =: >LF cut raw
getindex =: {{
	<('ABC' i. {. y) , ('XYZ' i. {: y)
}}

+/ (M {~ getindex)"1 lines
