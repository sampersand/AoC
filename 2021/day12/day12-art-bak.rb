        ####################################        
     ##################  ####  ################   
   ########### #######   ###    ###### ########## 
  ##########    ####      #      ###    ##########
 ####### #       ##                #      #  ###### 
 #####            #                           ##### 
#####                     #                    #####
####              #       #        #            ####
####    ##       ###     ##       ##      #     ####
####################################################

__END__
$stdin=open('day12.txt')
G={}

$<.map{_1.chomp=~/-/;(G[$`]||=[])<<$';(G[$']||=[])<<$`}
S='start'
R=->s=S,v=[],i=p{
  a=[];next[[s]]if'end'==s
  s[/[a-z]/]&&(next[]if[s]==v&[s]&&i
    S!=s&&!i&$p&&(G[s]-v).map{a+=R[_1,v,1]}
    v+=[s])
  (G[s]-v).map{a+=R[_1,v,i]};a.map{_1<<s}.uniq
}

puts "part1: #{$p=R[].size}"
puts "part2: #{b=R[].size}"

raise unless $p == 4912
raise unless b ==150004
