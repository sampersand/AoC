                            ####
                          ########
                         ##########
                          ########
                            ####
                                    ####
                                   ######
                                    ####
                               ####
            ###########       ######
        ###################    ####
       ## ############### ##   
         #################     
         #################     
          ###############         ##
  ######  ##################   ####
##  #############################
   ## ############################
  ##    ####################    ##
   ##   # #####   ###   ####     ##
    ##     ##      ##      ##     # 
            ###    ###  # ##
                         ##

__END__
$stdin = open('day11.txt')

g={}
$<.map{|l|l.chars[..-2].zip(0..){g[$.+_2.i]=_1.to_i}}

x=s=0
(1..).map{|n|
g.map{g[_1]=_2+1}
x.map{|k,_|
g[k]=p
[-1-1i,-1,-1+1i,-1i,1i,1-1i,1,1+1i].map{k+_1}.select(&g).map{g[_1]+=1}
}until{}==x=g.select{_2&.>9}
g.map{g[_1]=_2||(s+=1;0)}
p"part1:#{s}"if n==100
(p"part2:#{n}";break)if[0]==g.map{_2}|[]
}
